<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gu칤a de Estudio: Lenguaje y Comprensi칩n Lectora</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
        }
        .question-card {
            background-color: #ffffff;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease-in-out;
            border: 2px solid transparent;
        }
        .question-card.correct {
            border-color: #22c55e;
            box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
        }
        .question-card.incorrect {
            border-color: #ef4444;
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
        }
        .question-text {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 16px;
        }
        .option-button {
            width: 100%;
            text-align: left;
            padding: 12px 16px;
            margin-bottom: 8px;
            border-radius: 8px;
            border: 1px solid #d1d5db;
            background-color: #f9fafb;
            color: #374151;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
        }
        .option-button:hover:not([disabled]) {
            background-color: #e5e7eb;
        }
        .option-button.correct {
            background-color: #dcfce7;
            border-color: #10b981;
            color: #15803d;
            font-weight: 600;
        }
        .option-button.incorrect {
            background-color: #fee2e2;
            border-color: #ef4444;
            color: #dc2626;
        }
        .explanation {
            margin-top: 16px;
            padding: 12px;
            border-radius: 8px;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        .explanation.correct {
            background-color: #dcfce7;
            border-left: 4px solid #10b981;
            color: #166534;
        }
        .explanation.incorrect {
            background-color: #fee2e2;
            border-left: 4px solid #ef4444;
            color: #991b1b;
        }
        .summary-card {
            background-color: #ffffff;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            display: none;
        }
        .summary-title {
            font-size: 2rem;
            font-weight: 700;
            color: #1f2937;
        }
        .score {
            font-size: 3rem;
            font-weight: 800;
            color: #4f46e5;
            margin: 16px 0;
        }
        .whatsapp-button {
            display: inline-flex;
            align-items: center;
            padding: 12px 24px;
            background-color: #25d366;
            color: white;
            font-weight: 600;
            border-radius: 9999px;
            text-decoration: none;
            margin-top: 20px;
            transition: background-color 0.2s;
        }
        .whatsapp-button:hover {
            background-color: #1ea04d;
        }
        .whatsapp-icon {
            width: 24px;
            height: 24px;
            margin-right: 8px;
        }
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-top-color: #4f46e5;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            display: none;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .long-text {
            background-color: #f3f4f6;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            line-height: 1.6;
            text-align: justify;
        }
        .text-area-input {
            width: 100%;
            height: 100px;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #d1d5db;
            margin-top: 10px;
            resize: vertical;
        }
        .submit-button {
            background-color: #4f46e5;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            margin-top: 10px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .submit-button:hover {
            background-color: #4338ca;
        }
    </style>
</head>
<body class="bg-gray-100">

<div class="container bg-white p-8 rounded-lg shadow-lg mt-10">
    <h1 class="text-3xl font-bold text-center mb-6 text-indigo-700">Gu칤a de Estudio: Lenguaje y Comprensi칩n Lectora</h1>
    <p class="text-center text-gray-600 mb-8">춰Pon a prueba tu habilidad para comprender textos, usar el vocabulario y aplicar reglas de ortograf칤a!</p>

    <div id="quiz-container">
        <!-- Las preguntas se generar치n aqu칤 por JavaScript -->
    </div>

    <div id="summary-container" class="summary-card">
        <h2 class="summary-title">춰Prueba Terminada!</h2>
        <p class="text-gray-600 mt-2">Has completado todas las preguntas. Tu resultado es:</p>
        <div id="final-score" class="score"></div>
        <button id="restart-button" class="bg-indigo-600 text-white font-bold py-2 px-4 rounded-full hover:bg-indigo-700 transition">Volver a Intentar</button>
        <a id="whatsapp-link" href="#" class="whatsapp-button">
            <svg class="whatsapp-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12.04 2.843c-5.83 0-10.557 4.726-10.557 10.556 0 1.954.526 3.82 1.528 5.467L1.87 21.144l3.193-.837c1.556.883 3.321 1.346 5.127 1.346 5.83 0 10.556-4.726 10.556-10.557C22.596 7.57 17.87 2.843 12.04 2.843zm4.62 14.808c-.287.19-.68.304-1.258.125-.578-.179-1.92-1.056-2.227-1.168-.307-.112-.533-.168-.758.169-.225.337-.872 1.169-1.06 1.394-.188.225-.376.253-.69.074-.313-.18-1.328-.485-2.527-1.56-.934-.84-1.567-1.872-1.745-2.179-.178-.307-.019-.476.159-.654.162-.164.385-.436.576-.653.19-.217.253-.362.376-.605.123-.242.062-.45-.031-.63-.09-.18-.847-2.04-.995-2.784-.148-.744-.296-.628-.409-.64-.112-.01-.242-.01-.409-.01-.167 0-.448.062-.68.337-.23.275-.872.84-1.06 1.018-.187.178-.34.337-.34.872s.409.68 1.169 1.705c.76 1.025 1.562 1.872 2.76 2.868 1.198.995 2.226 1.302 2.656 1.48s.66.19.94.125c.28-.06.92-.376 1.056-.744.137-.367.137-.68.09-1.257-.046-.578-.168-.962-.253-1.127-.084-.165-.18-.307-.26-.448-.08-.142-.014-.23.111-.476.125-.245 1.169 1.025 2.193 1.54 1.025.514 1.25.597 1.48.625.225.027 1.25 0 1.438-.15.188-.15.376-.476.533-.807.158-.33.158-.62.112-.68-.045-.06-.17-.11-.358-.19-.187-.08-.448-.156-.68-.28-.23-.125-.494-.28-.758-.514-.264-.234-.526-.612-.526-1.14 0-.528.28-1.025.59-1.353.31-.328.718-.745 1.094-1.112.376-.367.656-.479.94-.494.28-.015.758.075 1.127.375.368.3.575.652.72.84.144.187.28.409.408.62.129.21.28.452.377.653.097.202.19.26.22.408.03.148-.253.355-.38.543-.127.187-.27.376-.408.533-.138.158-.28.324-.42.479-.142.155-.26.29-.26.447z"/>
            </svg>
            Compartir resultado
        </a>
    </div>

    <div id="loading" class="loading-spinner"></div>
</div>

<script>
    const longTexts = {
        'text-1': `
            El viejo marinero, con su barba blanca y sus ojos tan azules como el mar que hab칤a surcado toda su vida, se sent칩 en la popa de su peque침o bote, observando las nubes acumularse en el horizonte. Se llamaba El칤as, y a sus setenta a침os, no hab칤a un solo puerto desde el 츼rtico hasta el Caribe que no conociera. Pero su historia m치s fascinante no era sobre tormentas feroces ni tesoros escondidos, sino sobre la b칰squeda de un faro m칤tico que, seg칰n las leyendas, se mov칤a.

            Durante su juventud, en una noche de bruma densa, El칤as y su tripulaci칩n se perdieron. La br칰jula fallaba y las estrellas estaban ocultas. Justo cuando la desesperaci칩n comenzaba a apoderarse de ellos, un haz de luz verde apareci칩 a lo lejos, cortando la neblina. Era un faro, pero su luz no era blanca ni amarilla, sino de un verde intenso, casi esmeralda. El칤as sigui칩 esa luz, y poco a poco, los gui칩 hacia un canal seguro que nadie hab칤a visto antes. Cuando llegaron a puerto, la tripulaci칩n le pregunt칩 a los lugare침os sobre el faro verde, pero todos se miraron perplejos. No exist칤a tal faro.

            Este suceso se convirti칩 en la obsesi칩n de El칤as. Se dedic칩 a investigar antiguas bit치coras, a interrogar a otros marineros y a buscar mapas olvidados. Descubri칩 que la leyenda hablaba de "El Guardi치n Esmeralda", un faro que solo se manifestaba en momentos de gran necesidad, movi칠ndose para salvar a aquellos que estaban a punto de naufragar. No era una estructura fija, sino una fuerza protectora del oc칠ano. A lo largo de los a침os, El칤as vio su luz una y otra vez, siempre en los momentos m치s cr칤ticos, pero nunca lograba acercarse lo suficiente para desentra침ar su misterio.

            El칤as cre칤a que El Guardi치n Esmeralda no era solo un faro, sino la manifestaci칩n de la esencia misma del mar, un esp칤ritu antiguo que cuidaba de los navegantes. Algunos se burlaban de su creencia, llam치ndolo viejo loco, pero El칤as no se inmutaba. Sab칤a lo que hab칤a visto. En sus 칰ltimos viajes, dej칩 de buscar el faro y, en cambio, se dedic칩 a ser un gu칤a para los barcos m치s j칩venes. Les ense침aba a leer el cielo, a entender las corrientes y, sobre todo, a respetar al mar. Les contaba la historia de El Guardi치n Esmeralda, no como una f치bula, sino como una lecci칩n sobre la bondad y la protecci칩n que se puede encontrar en los lugares m치s inesperados.

            El칤as muri칩 tranquilamente, a bordo de su bote, una noche serena bajo un cielo estrellado. Los marineros de la regi칩n, que lo respetaban profundamente, le dieron un entierro tradicional en el mar. Cuenta la leyenda que, en ese momento, una luz verde, fugaz y tenue, parpade칩 en el horizonte antes de desaparecer por completo, como si el viejo marinero y su faro m칤stico finalmente se hubieran reunido para descansar en el vasto y eterno abrazo del oc칠ano.
        `,
        'text-2': `
            El concepto de inteligencia artificial (IA), una rama de la inform치tica que busca crear m치quinas capaces de pensar, aprender y razonar como los humanos, ha evolucionado de manera exponencial en las 칰ltimas d칠cadas. Su historia no es lineal, sino que ha estado marcada por ciclos de euforia, inversi칩n masiva y posterior desilusi칩n, conocidos como los "inviernos de la IA". Sin embargo, el presente se siente diferente. El r치pido avance en el poder de procesamiento, la disponibilidad de enormes conjuntos de datos y la innovaci칩n en algoritmos de aprendizaje profundo han impulsado a la IA a una nueva era de relevancia y aplicaci칩n pr치ctica.

            Una de las 치reas m치s transformadoras es el **procesamiento del lenguaje natural (PLN)**. Modelos como GPT (Generative Pre-trained Transformer) han demostrado una capacidad asombrosa para generar texto coherente, traducir idiomas, resumir documentos y responder preguntas de manera conversacional. Estas herramientas no solo han mejorado la eficiencia en industrias como la atenci칩n al cliente y la creaci칩n de contenido, sino que tambi칠n est치n cambiando la forma en que interactuamos con la tecnolog칤a. La voz se ha convertido en una interfaz principal para muchos dispositivos, y los asistentes virtuales son cada vez m치s sofisticados.

            En el 치mbito de la visi칩n por computadora, la IA ha alcanzado una precisi칩n sin precedentes en la detecci칩n y reconocimiento de objetos. Los veh칤culos aut칩nomos dependen de estos sistemas para interpretar su entorno en tiempo real, desde identificar peatones hasta reconocer se침ales de tr치fico. En medicina, la IA est치 ayudando a diagnosticar enfermedades a partir de im치genes m칠dicas como radiograf칤as o resonancias magn칠ticas, a menudo con mayor precisi칩n que un ojo humano, acelerando el proceso y permitiendo una intervenci칩n temprana.

            El aprendizaje por refuerzo, otro pilar fundamental de la IA, ha logrado hitos notables. Sistemas como AlphaGo de Google DeepMind han derrotado a campeones mundiales en juegos complejos, no por programaci칩n de reglas espec칤ficas, sino por aprender a trav칠s de la experimentaci칩n y la retroalimentaci칩n. Este tipo de aprendizaje tiene un gran potencial para optimizar sistemas complejos, como la gesti칩n de redes el칠ctricas o el control de la rob칩tica.

            A pesar de todos estos avances, la IA todav칤a enfrenta desaf칤os significativos. La **칠tica y los sesgos** son una preocupaci칩n constante. Los modelos de IA son tan buenos como los datos con los que se entrenan; si los datos reflejan sesgos sociales o hist칩ricos, la IA los replicar치. La explicabilidad es otro problema: a menudo es dif칤cil entender c칩mo un modelo de aprendizaje profundo llega a una conclusi칩n, lo que es crucial en campos como la medicina o la justicia. Adem치s, el debate sobre el impacto de la IA en el mercado laboral y su potencial para reemplazar trabajos sigue siendo un tema de discusi칩n acalorada. La IA no es una soluci칩n m치gica, sino una herramienta poderosa que, como cualquier tecnolog칤a, requiere una cuidadosa consideraci칩n de sus implicaciones sociales y 칠ticas.
        `
    };

    const allQuestions = [
        // Preguntas basadas en el texto 1 (El Guardi치n Esmeralda)
        {
            type: 'multiple-choice',
            textId: 'text-1',
            question: "쯈ui칠n era El칤as y qu칠 lo hac칤a un marinero notable?",
            options: [
                "Un joven pescador del 츼rtico, conocido por ser el m치s r치pido.",
                "Un hombre de setenta a침os con gran experiencia, que hab칤a navegado por casi todos los mares.",
                "Un marinero que solo navegaba en el Caribe, famoso por encontrar tesoros.",
                "Un pirata que robaba barcos en la bruma."
            ],
            answer: "Un hombre de setenta a침os con gran experiencia, que hab칤a navegado por casi todos los mares.",
            explanation: "Seg칰n el texto, 'a sus setenta a침os, no hab칤a un solo puerto desde el 츼rtico hasta el Caribe que no conociera'."
        },
        {
            type: 'multiple-choice',
            textId: 'text-1',
            question: "쯈u칠 caracter칤stica especial ten칤a el faro que El칤as vio en su juventud?",
            options: [
                "Era un faro de madera que flotaba en el agua.",
                "Ten칤a una luz azul que cambiaba de color con el clima.",
                "Su luz era de un color verde esmeralda y parec칤a moverse.",
                "Emit칤a un sonido que alertaba a los barcos de la bruma."
            ],
            answer: "Su luz era de un color verde esmeralda y parec칤a moverse.",
            explanation: "El texto lo describe como 'un haz de luz verde... casi esmeralda' y menciona que la leyenda hablaba de un faro que se mov칤a."
        },
        {
            type: 'multiple-choice',
            textId: 'text-1',
            question: "쮺u치l era la creencia de El칤as sobre 'El Guardi치n Esmeralda'?",
            options: [
                "Que era un faro real construido por una civilizaci칩n antigua.",
                "Que era una ilusi칩n 칩ptica causada por la bruma densa.",
                "Que era un esp칤ritu protector del oc칠ano que ayudaba a los marineros.",
                "Que era la invenci칩n de otros marineros para asustar a los nuevos."
            ],
            answer: "Que era un esp칤ritu protector del oc칠ano que ayudaba a los marineros.",
            explanation: "El texto afirma que El칤as cre칤a que el faro era 'la manifestaci칩n de la esencia misma del mar, un esp칤ritu antiguo que cuidaba de los navegantes'."
        },
        {
            type: 'multiple-choice',
            textId: 'text-1',
            question: "Al final de su vida, 쯖칩mo us칩 El칤as la leyenda de El Guardi치n Esmeralda?",
            options: [
                "La us칩 para ganar dinero cobrando por contar historias.",
                "La us칩 para asustar a los marineros que no respetaban el mar.",
                "La us칩 como una lecci칩n sobre la bondad del oc칠ano para los marineros j칩venes.",
                "Dej칩 de creer en la leyenda y se dedic칩 a la pesca."
            ],
            answer: "La us칩 como una lecci칩n sobre la bondad del oc칠ano para los marineros j칩venes.",
            explanation: "El texto dice que 'les contaba la historia de El Guardi치n Esmeralda, no como una f치bula, sino como una lecci칩n sobre la bondad y la protecci칩n'."
        },
        {
            type: 'multiple-choice',
            textId: 'text-1',
            question: "쯈u칠 sucedi칩 en el momento de la muerte de El칤as?",
            options: [
                "Una gran tormenta se desat칩 en el mar.",
                "Una luz verde, fugaz y tenue, parpade칩 en el horizonte.",
                "El칤as desapareci칩 sin dejar rastro.",
                "Su barco se hundi칩 misteriosamente."
            ],
            answer: "Una luz verde, fugaz y tenue, parpade칩 en el horizonte.",
            explanation: "La leyenda al final del texto narra que 'una luz verde, fugaz y tenue, parpade칩 en el horizonte' al momento de su muerte."
        },
        // Preguntas basadas en el texto 2 (Inteligencia Artificial)
        {
            type: 'multiple-choice',
            textId: 'text-2',
            question: "Seg칰n el texto, 쯤u칠 han impulsado a la IA a una nueva era de relevancia?",
            options: [
                "La creaci칩n de robots humanoides.",
                "Los 'inviernos de la IA' y la desilusi칩n de los programadores.",
                "El avance en el procesamiento, la disponibilidad de datos y la innovaci칩n en algoritmos.",
                "El desarrollo de videojuegos m치s complejos."
            ],
            answer: "El avance en el procesamiento, la disponibilidad de datos y la innovaci칩n en algoritmos.",
            explanation: "El texto menciona que 'El r치pido avance en el poder de procesamiento, la disponibilidad de enormes conjuntos de datos y la innovaci칩n en algoritmos de aprendizaje profundo han impulsado a la IA a una nueva era'."
        },
        {
            type: 'multiple-choice',
            textId: 'text-2',
            question: "쯈u칠 치rea de la IA es responsable de la generaci칩n de texto coherente y la traducci칩n de idiomas?",
            options: [
                "La visi칩n por computadora.",
                "El aprendizaje por refuerzo.",
                "El procesamiento del lenguaje natural (PLN).",
                "La rob칩tica."
            ],
            answer: "El procesamiento del lenguaje natural (PLN).",
            explanation: "El texto establece que 'Una de las 치reas m치s transformadoras es el **procesamiento del lenguaje natural (PLN)**. Modelos como GPT... han demostrado una capacidad asombrosa para generar texto coherente, traducir idiomas...'"
        },
        {
            type: 'multiple-choice',
            textId: 'text-2',
            question: "쯈u칠 ejemplo se da en el texto para ilustrar la visi칩n por computadora en medicina?",
            options: [
                "El uso de robots para realizar cirug칤as complejas.",
                "La ayuda para diagnosticar enfermedades a partir de im치genes m칠dicas.",
                "La creaci칩n de pr칩tesis inteligentes.",
                "El an치lisis de datos de pacientes para predecir enfermedades."
            ],
            answer: "La ayuda para diagnosticar enfermedades a partir de im치genes m칠dicas.",
            explanation: "El texto dice que 'la IA est치 ayudando a diagnosticar enfermedades a partir de im치genes m칠dicas como radiograf칤as o resonancias magn칠ticas'."
        },
        {
            type: 'multiple-choice',
            textId: 'text-2',
            question: "쮺u치l es uno de los desaf칤os 칠ticos principales de la IA mencionados en el texto?",
            options: [
                "La falta de poder de procesamiento en las computadoras.",
                "La dificultad para que los humanos se adapten a la tecnolog칤a.",
                "Los sesgos que pueden ser replicados a partir de los datos de entrenamiento.",
                "El alto costo de los sistemas de IA."
            ],
            answer: "Los sesgos que pueden ser replicados a partir de los datos de entrenamiento.",
            explanation: "El texto se침ala que 'La **칠tica y los sesgos** son una preocupaci칩n constante... si los datos reflejan sesgos sociales o hist칩ricos, la IA los replicar치'."
        },
        {
            type: 'multiple-choice',
            textId: 'text-2',
            question: "쯈u칠 se entiende por 'inviernos de la IA' seg칰n el texto?",
            options: [
                "Periodos de gran avance tecnol칩gico.",
                "Ciclos de desilusi칩n y falta de inversi칩n en la IA.",
                "Temporadas del a침o en las que la IA es menos utilizada.",
                "Programas de entrenamiento de IA en ambientes fr칤os."
            ],
            answer: "Ciclos de desilusi칩n y falta de inversi칩n en la IA.",
            explanation: "El texto define los 'inviernos de la IA' como 'ciclos de euforia, inversi칩n masiva y posterior desilusi칩n'."
        },
        // Preguntas de Vocabulario
        {
            type: 'multiple-choice',
            question: "쮺u치l es el sin칩nimo de la palabra 'ef칤mero'?",
            options: ["Eterno", "Duradero", "Pasajero", "Estable"],
            answer: "Pasajero",
            explanation: "Ef칤mero se refiere a algo que dura por un tiempo muy corto. Pasajero tiene un significado similar."
        },
        {
            type: 'multiple-choice',
            question: "쮺u치l es el ant칩nimo de la palabra 'efusivo'?",
            options: ["Entusiasta", "Alegre", "Reservado", "Expansivo"],
            answer: "Reservado",
            explanation: "Efusivo se refiere a una persona que muestra sus sentimientos de manera abierta y entusiasta. Reservado es lo opuesto."
        },
        {
            type: 'multiple-choice',
            question: "쯈u칠 palabra pertenece a la misma familia que 'mar'?",
            options: ["Marea", "Mano", "Comer", "Marr칩n"],
            answer: "Marea",
            explanation: "La palabra 'marea' se deriva de 'mar' y comparte su ra칤z y significado, relacionada con el oc칠ano."
        },
        {
            type: 'multiple-choice',
            question: "쮺u치l es el sin칩nimo de la palabra 'ins칩lito'?",
            options: ["Com칰n", "Ordinario", "Rutinario", "Inusual"],
            answer: "Inusual",
            explanation: "Ins칩lito se refiere a algo fuera de lo com칰n o extraordinario. Inusual es el sin칩nimo m치s cercano."
        },
        {
            type: 'multiple-choice',
            question: "쮺u치l es el ant칩nimo de la palabra 'audaz'?",
            options: ["Valiente", "Arrojado", "Cobarde", "Temerario"],
            answer: "Cobarde",
            explanation: "Audaz se refiere a una persona valiente y atrevida. Cobarde es lo opuesto."
        },
        {
            type: 'multiple-choice',
            question: "쯈u칠 palabra pertenece a la misma familia que 'pan'?",
            options: ["Masa", "Panadero", "Sopa", "Sal"],
            answer: "Panadero",
            explanation: "Un panadero es una persona que hace pan. Ambas palabras comparten la ra칤z 'pan-'."
        },
        // Preguntas de Ortograf칤a
        {
            type: 'multiple-choice',
            question: "쮼n qu칠 palabra se usa correctamente la tilde?",
            options: ["치rbol", "arbol", "Arbol", "ARBOL"],
            answer: "치rbol",
            explanation: "La palabra '치rbol' es una palabra grave o llana que termina en 'l', por lo que lleva tilde en la primera 'a'."
        },
        {
            type: 'multiple-choice',
            question: "쯈u칠 palabra est치 escrita correctamente?",
            options: ["exepci칩n", "excepci칩n", "ecsepsi칩n", "excepsion"],
            answer: "excepci칩n",
            explanation: "La palabra se escribe con 'x' y 'c', y lleva tilde en la 'o' por ser aguda y terminar en 'n'."
        },
        {
            type: 'multiple-choice',
            question: "쮺u치l es el uso correcto de la may칰scula?",
            options: ["el domingo voy a madrid", "El domingo voy a Madrid", "El Domingo voy a madrid", "el domingo voy a Madrid"],
            answer: "El domingo voy a Madrid",
            explanation: "Se usa may칰scula al inicio de una oraci칩n y en los nombres propios, como 'Madrid'."
        },
        {
            type: 'multiple-choice',
            question: "Selecciona la palabra que est치 escrita correctamente.",
            options: ["haber", "aver", "aber", "haver"],
            answer: "haber",
            explanation: "La forma verbal 'haber' se escribe con 'h' y 'b'."
        },
        {
            type: 'multiple-choice',
            question: "쯈u칠 palabra est치 escrita correctamente?",
            options: ["vaca", "baca"],
            answer: "vaca",
            explanation: "'Vaca' es un animal y se escribe con 'v'. 'Baca' se refiere al portaequipajes de un coche y es una palabra menos com칰n."
        },
        {
            type: 'multiple-choice',
            question: "쮼n qu칠 oraci칩n se usa correctamente la tilde?",
            options: ["칄l es mi amigo.", "El es mi amigo.", "el es mi amigo.", "칄l es mi amigo"],
            answer: "칄l es mi amigo.",
            explanation: "El pronombre personal '칠l' lleva tilde para distinguirlo del art칤culo 'el'."
        },
        // Preguntas de comprensi칩n de narraciones
        {
            type: 'multiple-choice',
            question: `Lee la siguiente historia:
            "Ana se despert칩 con el canto de los p치jaros en su granja. Se puso sus botas de goma y sali칩 a alimentar a las gallinas antes de que el sol estuviera alto en el cielo. Su perro, Lucas, la sigui칩 de cerca, moviendo la cola. Ella sab칤a que ser칤a un d칤a largo, lleno de tareas, pero el aire fresco de la ma침ana la llenaba de energ칤a."
            쯈ui칠n es el personaje principal de esta historia?`,
            options: ["Ana", "Lucas", "Las gallinas", "Los p치jaros"],
            answer: "Ana",
            explanation: "La historia se centra en las acciones y pensamientos de Ana, haci칠ndola el personaje principal."
        },
        {
            type: 'multiple-choice',
            question: `Lee la siguiente historia:
            "Javier, un valiente caballero, cabalg칩 a trav칠s del bosque encantado. Las sombras de los 치rboles eran altas y las ramas parec칤an manos huesudas. Su misi칩n era recuperar el amuleto del Rey, robado por el malvado brujo, antes de la medianoche."
            쮻칩nde se desarrolla esta historia?`,
            options: ["En un castillo", "En un bosque encantado", "En una cueva", "En un desierto"],
            answer: "En un bosque encantado",
            explanation: "El texto especifica que Javier cabalg칩 'a trav칠s del bosque encantado'."
        },
        {
            type: 'multiple-choice',
            question: `Lee la siguiente historia:
            "La nave espacial 'Estrella Errante' parti칩 de la estaci칩n espacial Apolo a las 05:00 horas, con destino al planeta J칰piter. La misi칩n, programada para durar dos a침os, buscar칤a signos de vida en la luna de J칰piter, Europa. El Capit치n Liam, al mando, observaba las estrellas con melancol칤a, sabiendo que no regresar칤a a la Tierra por mucho tiempo."
            쮼n qu칠 momento se desarrolla la historia?`,
            options: ["A las 05:00 horas", "Durante la noche", "Al mediod칤a", "A las 12:00 horas"],
            answer: "A las 05:00 horas",
            explanation: "El texto menciona que la nave 'parti칩... a las 05:00 horas'."
        },
        // Preguntas de Comprensi칩n de instrucciones y l칩gica
        {
            type: 'multiple-choice',
            question: `Lee atentamente las instrucciones:
            1. Si la palabra tiene 5 letras, selecciona la tercera opci칩n.
            2. Si la palabra tiene m치s de 6 letras, selecciona la primera opci칩n.
            3. Si la palabra tiene 6 letras, selecciona la segunda opci칩n.
            4. Si la palabra tiene menos de 5 letras, selecciona la cuarta opci칩n.
            쯈u칠 opci칩n debes seleccionar para la palabra 'manzana'?`,
            options: ["Primera opci칩n", "Segunda opci칩n", "Tercera opci칩n", "Cuarta opci칩n"],
            answer: "Primera opci칩n",
            explanation: "La palabra 'manzana' tiene 7 letras, lo cual es m치s de 6. De acuerdo con la segunda instrucci칩n, debes seleccionar la primera opci칩n."
        },
        {
            type: 'multiple-choice',
            question: `Sigue estas instrucciones:
            1. En la siguiente lista, si el segundo n칰mero es par, selecciona la palabra 'sol'.
            2. Si el segundo n칰mero es impar, selecciona la palabra 'luna'.
            Lista: (5, 8, 3, 7)
            쮺u치l palabra debes seleccionar?`,
            options: ["sol", "luna", "estrellas", "nube"],
            answer: "sol",
            explanation: "El segundo n칰mero en la lista es 8, que es un n칰mero par. Seg칰n la primera instrucci칩n, debes seleccionar la palabra 'sol'."
        },
        {
            type: 'multiple-choice',
            question: `Instrucciones:
            1. Encuentra la palabra que es un sin칩nimo de 'r치pido'.
            2. De las opciones, elige la que no es un sin칩nimo.
            Opciones: (Veloz, 츼gil, Lento, Raudo)
            쯈u칠 opci칩n debes seleccionar?`,
            options: ["Veloz", "츼gil", "Lento", "Raudo"],
            answer: "Lento",
            explanation: "Las opciones 'Veloz', '츼gil' y 'Raudo' son sin칩nimos de 'r치pido'. La opci칩n 'Lento' es el ant칩nimo."
        },
        // Preguntas de Redacci칩n (text-area)
        {
            type: 'text-area',
            question: "Describe en una sola oraci칩n coherente la sensaci칩n de alegr칤a.",
            answer: "La alegr칤a es una emoci칩n luminosa que ilumina el coraz칩n y hace que los problemas parezcan peque침os.",
            explanation: "Una oraci칩n coherente y bien construida debe tener un sujeto ('La alegr칤a'), un verbo ('es'), y un predicado que complemente la idea. La oraci칩n de ejemplo utiliza met치foras ('emoci칩n luminosa', 'ilumina el coraz칩n') para describir la sensaci칩n de manera clara y creativa."
        },
        {
            type: 'text-area',
            question: "Escribe un p치rrafo de 3 oraciones describiendo un lugar que te transmita paz.",
            answer: "El jard칤n de mi abuela es mi refugio. El suave murmullo de la fuente y el aroma de las flores crean una atm칩sfera de tranquilidad. Sentarme en el banco de madera, bajo la sombra de un 치rbol, me hace sentir en perfecta calma.",
            explanation: "Un p치rrafo coherente debe tener una idea principal y oraciones que la apoyen. El p치rrafo de ejemplo describe un lugar espec칤fico (el jard칤n) y luego utiliza detalles sensoriales (murmullo de la fuente, aroma de las flores) para ilustrar la sensaci칩n de paz."
        },
        // M치s preguntas de vocabulario, ortograf칤a, etc.
        {
            type: 'multiple-choice',
            question: "El sin칩nimo de 'valioso' es:",
            options: ["Insignificante", "Precioso", "Ordinario", "Com칰n"],
            answer: "Precioso",
            explanation: "Precioso significa de gran valor, igual que valioso."
        },
        {
            type: 'multiple-choice',
            question: "El ant칩nimo de 'subir' es:",
            options: ["Ascender", "Descender", "Trepar", "Elevar"],
            answer: "Descender",
            explanation: "Subir es ir hacia arriba, y descender es ir hacia abajo."
        },
        {
            type: 'multiple-choice',
            question: "쯈u칠 palabra pertenece a la misma familia que 'flor'?",
            options: ["Vaso", "Tierra", "Florero", "Agua"],
            answer: "Florero",
            explanation: "Un florero es un recipiente para flores. Ambas palabras comparten la ra칤z 'flor-'."
        },
        {
            type: 'multiple-choice',
            question: "La palabra 'elegante' se acent칰a en:",
            options: ["La primera 'e'", "La 'g'", "La 'e' final", "No lleva acento"],
            answer: "No lleva acento",
            explanation: "La palabra 'elegante' es grave o llana y termina en vocal, por lo que no lleva tilde."
        },
        {
            type: 'multiple-choice',
            question: "La palabra 'corregir' se escribe con:",
            options: ["g", "j", "c", "s"],
            answer: "g",
            explanation: "La palabra 'corregir' se escribe con 'g'."
        },
        {
            type: 'multiple-choice',
            question: "쮺u치l es el sin칩nimo de 'confundido'?",
            options: ["Claro", "Explicado", "Desorientado", "Preciso"],
            answer: "Desorientado",
            explanation: "Una persona confundida se siente desorientada. Ambos t칠rminos son sin칩nimos."
        },
        {
            type: 'multiple-choice',
            question: "El ant칩nimo de 'feliz' es:",
            options: ["Contento", "Alegre", "Triste", "Emocionado"],
            answer: "Triste",
            explanation: "Feliz y triste son emociones opuestas."
        },
        {
            type: 'multiple-choice',
            question: "쯈u칠 palabra pertenece a la misma familia que 'libro'?",
            options: ["Hoja", "Librer칤a", "Papel", "Escribir"],
            answer: "Librer칤a",
            explanation: "Una librer칤a es un lugar donde se venden libros. Comparten la ra칤z 'libr-'."
        },
        {
            type: 'multiple-choice',
            question: "쯈u칠 palabra est치 escrita correctamente?",
            options: ["hiban", "iban", "Iban", "hiban"],
            answer: "iban",
            explanation: "El verbo 'ir' en pasado se escribe 'iban' sin 'h'."
        },
        {
            type: 'multiple-choice',
            question: "쮺u치l es el sin칩nimo de 'tranquilo'?",
            options: ["Nervioso", "Agitado", "Sereno", "Preocupado"],
            answer: "Sereno",
            explanation: "Sereno significa calmado, que es un sin칩nimo de tranquilo."
        },
        {
            type: 'multiple-choice',
            question: "El ant칩nimo de 'limpio' es:",
            options: ["Ordenado", "Pulcro", "Sucio", "Aseado"],
            answer: "Sucio",
            explanation: "Limpio es lo opuesto a sucio."
        },
        {
            type: 'multiple-choice',
            question: "쯈u칠 palabra pertenece a la misma familia que 'sal'?",
            options: ["Sopa", "Salero", "Az칰car", "Pimienta"],
            answer: "Salero",
            explanation: "Un salero es un recipiente para sal."
        },
        {
            type: 'multiple-choice',
            question: "La palabra 'cartel' se acent칰a en:",
            options: ["la 'a'", "la 'e'", "No lleva acento", "en la 'l'"],
            answer: "No lleva acento",
            explanation: "La palabra 'cartel' es aguda y termina en 'l', por lo que no lleva tilde."
        },
        {
            type: 'multiple-choice',
            question: "La palabra 'bicicleta' se escribe con:",
            options: ["b y c", "v y c", "b y s", "v y s"],
            answer: "b y c",
            explanation: "La palabra 'bicicleta' se escribe con 'b' y 'c'."
        },
        {
            type: 'multiple-choice',
            question: "El sin칩nimo de 'enorme' es:",
            options: ["Peque침o", "Diminuto", "Colosal", "Bajo"],
            answer: "Colosal",
            explanation: "Colosal significa muy grande, igual que enorme."
        },
        {
            type: 'multiple-choice',
            question: "El ant칩nimo de 'comprar' es:",
            options: ["Vender", "Adquirir", "Obtener", "Pagar"],
            answer: "Vender",
            explanation: "Comprar es adquirir algo, vender es transferir la propiedad de algo."
        },
        {
            type: 'multiple-choice',
            question: "쯈u칠 palabra pertenece a la misma familia que 'sol'?",
            options: ["Luna", "Estrella", "Solar", "Calor"],
            answer: "Solar",
            explanation: "Solar se refiere a algo relacionado con el sol."
        },
        {
            type: 'multiple-choice',
            question: "El uso correcto de la may칰scula es:",
            options: ["mi primo es de m칠xico", "Mi primo es de M칠xico", "mi Primo es de M칠xico", "Mi primo es de m칠xico"],
            answer: "Mi primo es de M칠xico",
            explanation: "Se usa may칰scula al inicio de la oraci칩n y en los nombres propios de pa칤ses."
        }
    ];

    let currentQuestions = [];
    let score = 0;
    let questionsAnswered = 0;
    const numQuestionsPerSession = 15;

    // Funci칩n para mezclar un array de forma aleatoria (algoritmo Fisher-Yates)
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    // Funci칩n para inicializar el quiz
    function initializeQuiz() {
        const quizContainer = document.getElementById('quiz-container');
        const summaryContainer = document.getElementById('summary-container');
        quizContainer.innerHTML = '';
        summaryContainer.style.display = 'none';
        score = 0;
        questionsAnswered = 0;

        // Mezclar todas las preguntas y tomar una muestra
        shuffleArray(allQuestions);
        currentQuestions = allQuestions.slice(0, numQuestionsPerSession);

        currentQuestions.forEach((q, index) => {
            const questionCard = document.createElement('div');
            questionCard.className = 'question-card';
            questionCard.id = `question-card-${index}`;

            // Contenido del texto largo si aplica
            if (q.textId) {
                const longTextDiv = document.createElement('div');
                longTextDiv.className = 'long-text';
                longTextDiv.innerHTML = longTexts[q.textId];
                questionCard.appendChild(longTextDiv);
            }

            const questionText = document.createElement('div');
            questionText.className = 'question-text';
            questionText.innerHTML = `${index + 1}. ${q.question}`;
            questionCard.appendChild(questionText);

            if (q.type === 'multiple-choice') {
                const optionsContainer = document.createElement('div');
                shuffleArray(q.options);
                q.options.forEach(option => {
                    const optionButton = document.createElement('button');
                    optionButton.className = 'option-button';
                    optionButton.textContent = option;
                    optionButton.onclick = () => handleAnswer(index, option);
                    optionsContainer.appendChild(optionButton);
                });
                questionCard.appendChild(optionsContainer);
            } else if (q.type === 'text-area') {
                const textarea = document.createElement('textarea');
                textarea.className = 'text-area-input';
                textarea.placeholder = "Escribe tu respuesta aqu칤...";
                textarea.id = `textarea-${index}`;
                questionCard.appendChild(textarea);
                const submitButton = document.createElement('button');
                submitButton.className = 'submit-button';
                submitButton.textContent = 'Ver Respuesta y Explicaci칩n';
                submitButton.onclick = () => handleAnswer(index, textarea.value);
                questionCard.appendChild(submitButton);
            }

            quizContainer.appendChild(questionCard);
        });
    }

    // Funci칩n para manejar la respuesta del usuario
    function handleAnswer(questionIndex, selectedOption) {
        const questionCard = document.getElementById(`question-card-${questionIndex}`);
        const questionData = currentQuestions[questionIndex];

        if (questionData.type === 'multiple-choice') {
            const buttons = questionCard.querySelectorAll('.option-button');
            const isCorrect = (selectedOption === questionData.answer);

            buttons.forEach(button => {
                button.disabled = true;
                if (button.textContent === questionData.answer) {
                    button.classList.add('correct');
                } else if (button.textContent === selectedOption) {
                    button.classList.add('incorrect');
                }
            });

            questionCard.classList.add(isCorrect ? 'correct' : 'incorrect');
            if (isCorrect) {
                score++;
            }
        } else if (questionData.type === 'text-area') {
            const textarea = document.getElementById(`textarea-${questionIndex}`);
            const submitButton = questionCard.querySelector('.submit-button');
            textarea.disabled = true;
            submitButton.disabled = true;
            submitButton.style.backgroundColor = '#6b7280';

            // Para preguntas de texto, no hay "correcto" o "incorrecto"
            questionCard.classList.add('correct'); // Usamos 'correct' para mostrar la explicaci칩n
        }

        questionsAnswered++;

        // Mostrar la explicaci칩n
        const explanationDiv = document.createElement('div');
        explanationDiv.className = `explanation ${questionData.type === 'multiple-choice' ? (selectedOption === questionData.answer ? 'correct' : 'incorrect') : 'correct'}`;
        explanationDiv.innerHTML = questionData.explanation;
        if (questionData.type === 'multiple-choice') {
            explanationDiv.innerHTML = (selectedOption === questionData.answer) ?
                `춰Correcto! ${questionData.explanation}` :
                `Incorrecto. La respuesta correcta era '${questionData.answer}'. ${questionData.explanation}`;
        }

        questionCard.appendChild(explanationDiv);

        if (questionsAnswered === currentQuestions.length) {
            setTimeout(showSummary, 1000);
        }
    }

    // Funci칩n para mostrar el resumen del quiz
    function showSummary() {
        const quizContainer = document.getElementById('quiz-container');
        const summaryContainer = document.getElementById('summary-container');
        const finalScore = document.getElementById('final-score');
        const whatsappLink = document.getElementById('whatsapp-link');
        const scorePercentage = Math.round((score / currentQuestions.filter(q => q.type === 'multiple-choice').length) * 100);

        finalScore.textContent = `${score} / ${currentQuestions.filter(q => q.type === 'multiple-choice').length}`;

        const whatsappMessage = `춰Hola! Acabo de completar la prueba de Lenguaje y Comprensi칩n Lectora y obtuve una puntuaci칩n de ${score} de ${currentQuestions.filter(q => q.type === 'multiple-choice').length} (${scorePercentage}%). 춰A seguir practicando! 游눩`;
        const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(whatsappMessage)}`;
        whatsappLink.href = whatsappUrl;

        quizContainer.style.display = 'none';
        summaryContainer.style.display = 'block';
    }

    // Event listener para el bot칩n de reiniciar
    document.getElementById('restart-button').addEventListener('click', () => {
        const quizContainer = document.getElementById('quiz-container');
        const summaryContainer = document.getElementById('summary-container');
        quizContainer.style.display = 'block';
        summaryContainer.style.display = 'none';
        initializeQuiz();
    });

    // Inicializar el quiz cuando la p치gina carga
    document.addEventListener('DOMContentLoaded', initializeQuiz);
</script>

</body>
</html>
